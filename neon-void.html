<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Neon Void Mobile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #050505;
            touch-action: none;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }
        canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }
        .ui-layer {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 20;
            text-align: center;
            padding: 20px;
        }
        .neon-text {
            color: #fff;
            text-shadow: 0 0 10px #0ff, 0 0 20px #0ff;
            letter-spacing: 0.1em;
        }
        .hud {
            position: absolute;
            top: env(safe-area-inset-top, 20px);
            left: 0;
            right: 0;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            pointer-events: none;
            z-index: 30;
        }
        .btn-mobile {
            background: rgba(0, 255, 255, 0.1);
            border: 2px solid #0ff;
            color: #0ff;
            padding: 15px 40px;
            border-radius: 999px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
            pointer-events: auto;
            min-width: 200px;
        }
        .btn-mobile:active {
            background: #0ff;
            color: #000;
        }
    </style>
</head>
<body>

    <div id="hud" class="hud hidden">
        <div class="text-cyan-400 font-bold">SCORE: <span id="scoreEl">0</span></div>
        <div class="text-pink-500 font-bold">SHIELD: <span id="shieldEl">100%</span></div>
    </div>

    <div id="startScreen" class="ui-layer bg-black/90">
        <h1 class="text-5xl font-black mb-4 neon-text">NEON VOID</h1>
        <p class="text-cyan-300/70 mb-10 text-sm uppercase tracking-widest">Hold & Drag to Pilot</p>
        <button id="startBtn" class="btn-mobile">Start Mission</button>
    </div>

    <div id="gameOverScreen" class="ui-layer bg-black/95 hidden">
        <h2 class="text-4xl font-bold mb-2 text-red-500">CRITICAL FAILURE</h2>
        <p class="text-white text-lg mb-8">SCORE: <span id="finalScore" class="text-cyan-400">0</span></p>
        <button id="restartBtn" class="btn-mobile" style="border-color: #f43f5e; color: #f43f5e; box-shadow: 0 0 15px rgba(244, 63, 94, 0.3);">Reboot Ship</button>
    </div>

    <canvas id="gameCanvas"></canvas>

<script>
const AudioSys = {
    ctx: null,
    init() {
        if (!this.ctx) this.ctx = new (window.AudioContext || window.webkitAudioContext)();
        if (this.ctx.state === 'suspended') this.ctx.resume();
    },
    playShoot() {
        if (!this.ctx) return;
        const o = this.ctx.createOscillator(), g = this.ctx.createGain();
        o.type = 'triangle'; o.frequency.setValueAtTime(400, this.ctx.currentTime);
        o.frequency.exponentialRampToValueAtTime(100, this.ctx.currentTime + 0.1);
        g.gain.setValueAtTime(0.05, this.ctx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime + 0.1);
        o.connect(g); g.connect(this.ctx.destination);
        o.start(); o.stop(this.ctx.currentTime + 0.1);
    },
    playExplosion() {
        if (!this.ctx) return;
        const o = this.ctx.createOscillator(), g = this.ctx.createGain();
        o.type = 'sawtooth'; o.frequency.setValueAtTime(100, this.ctx.currentTime);
        o.frequency.exponentialRampToValueAtTime(40, this.ctx.currentTime + 0.3);
        g.gain.setValueAtTime(0.1, this.ctx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime + 0.3);
        o.connect(g); g.connect(this.ctx.destination);
        o.start(); o.stop(this.ctx.currentTime + 0.3);
    }
};

const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
let w, h, player, enemies, bullets, particles, gameRunning = false, score = 0;

function initPlayer() {
    player = { x: w/2, y: h - 100, size: 20, shield: 100, targetX: w/2 };
}

function resize() {
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
    if(player) player.y = h - 100;
}

window.addEventListener('resize', resize);
resize();

const handleMove = (e) => {
    const x = e.touches ? e.touches[0].clientX : e.clientX;
    if (player) player.targetX = x;
};

window.addEventListener('mousemove', handleMove);
window.addEventListener('touchmove', (e) => { e.preventDefault(); handleMove(e); }, { passive: false });
window.addEventListener('touchstart', (e) => { handleMove(e); }, { passive: false });

function spawnEnemy() {
    if (Math.random() < 0.03) {
        enemies.push({
            x: Math.random() * w, y: -50,
            size: 15 + Math.random() * 20,
            speed: 2 + Math.random() * 3,
            color: '#f43f5e'
        });
    }
}

function animate() {
    if (!gameRunning) return;
    ctx.fillStyle = 'rgba(5, 5, 5, 0.4)';
    ctx.fillRect(0, 0, w, h);

    // Player smooth follow
    player.x += (player.targetX - player.x) * 0.2;
    if (player.x < 20) player.x = 20;
    if (player.x > w - 20) player.x = w - 20;

    // Draw Player
    ctx.shadowBlur = 15; ctx.shadowColor = '#0ff';
    ctx.strokeStyle = '#0ff'; ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(player.x, player.y - 15);
    ctx.lineTo(player.x + 15, player.y + 15);
    ctx.lineTo(player.x - 15, player.y + 15);
    ctx.closePath(); ctx.stroke();
    ctx.shadowBlur = 0;

    // Auto shoot
    if (Date.now() % 150 < 20) {
        bullets.push({ x: player.x, y: player.y - 15 });
        AudioSys.playShoot();
    }

    // Bullets
    bullets.forEach((b, i) => {
        b.y -= 10;
        ctx.fillStyle = '#ff0';
        ctx.fillRect(b.x - 2, b.y, 4, 10);
        if (b.y < 0) bullets.splice(i, 1);
    });

    // Enemies
    spawnEnemy();
    enemies.forEach((e, i) => {
        e.y += e.speed;
        ctx.strokeStyle = e.color;
        ctx.strokeRect(e.x - e.size/2, e.y - e.size/2, e.size, e.size);

        // Collision bullet
        bullets.forEach((b, bi) => {
            if (Math.hypot(b.x - e.x, b.y - e.y) < e.size) {
                enemies.splice(i, 1);
                bullets.splice(bi, 1);
                score += 100;
                AudioSys.playExplosion();
            }
        });

        // Collision player
        if (Math.hypot(player.x - e.x, player.y - e.y) < e.size + 15) {
            enemies.splice(i, 1);
            player.shield -= 20;
            AudioSys.playExplosion();
            if (player.shield <= 0) endGame();
        }

        if (e.y > h + 50) enemies.splice(i, 1);
    });

    document.getElementById('scoreEl').innerText = score;
    document.getElementById('shieldEl').innerText = player.shield + '%';
    requestAnimationFrame(animate);
}

function startGame() {
    AudioSys.init();
    score = 0;
    enemies = []; bullets = [];
    initPlayer();
    gameRunning = true;
    document.getElementById('startScreen').classList.add('hidden');
    document.getElementById('gameOverScreen').classList.add('hidden');
    document.getElementById('hud').classList.remove('hidden');
    animate();
}

function endGame() {
    gameRunning = false;
    document.getElementById('gameOverScreen').classList.remove('hidden');
    document.getElementById('finalScore').innerText = score;
}

document.getElementById('startBtn').addEventListener('click', startGame);
document.getElementById('restartBtn').addEventListener('click', startGame);
</script>
</body>
</html>
