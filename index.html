<script>
  const chatbot = document.getElementById("chatbot");
  const messages = document.getElementById("messages");

  function toggleChat() {
    chatbot.classList.toggle("expanded");
  }

  function expandChat() {
    chatbot.classList.add("expanded");
  }

  function sendMessage() {
    const input = document.getElementById("userInput");
    const text = input.value.trim();
    if (!text) return;

    addMessage("user", text);
    input.value = "";

    setTimeout(() => {
      const reply = getGavinBotReply(text);
      addMessage("bot", reply);
    }, 500);
  }

  function addMessage(type, text) {
    const div = document.createElement("div");
    div.className = type;
    div.innerText = text;
    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
  }

  function getGavinBotReply(input) {
    const msg = input.toLowerCase();

    /* --- CORE KNOWLEDGE --- */

    if (msg.includes("who are you") || msg.includes("what are you")) {
      return "Iâ€™m GavinBot ğŸ¤– â€” shed-built AI pirate assistant. I guard GavinNot.com and occasionally give good advice.";
    }

    if (msg.includes("gavin")) {
      return "Gavin is the captain âš“ Engineer, creator, shed-builder, pirate-thinker and occasional karaoke legend.";
    }

    if (msg.includes("shed")) {
      return "Ah yesâ€¦ the Shed ğŸ´â€â˜ ï¸ A place of tools, ideas, red wine, AI experiments and controlled chaos.";
    }

    if (msg.includes("games")) {
      return "Games are scattered across the site ğŸ® Blackjack, roulette and more mischief incoming.";
    }

    if (msg.includes("project") || msg.includes("building")) {
      return "Current projects include GavinBot upgrades, shed expansions, AI companions and future pirate tech.";
    }

    if (msg.includes("help")) {
      return "I can help with the site, projects, ideas, or just have a chat. Try asking about the shed, games or Gavin.";
    }

    if (msg.includes("hello") || msg.includes("hi")) {
      return "Ahoy! ğŸ‘‹ Welcome aboard GavinNot.com. Mind the cables.";
    }

    /* --- FALLBACK --- */

    const fallback = [
      "Interestingâ€¦ tell me more âš™ï¸",
      "Thatâ€™s above my current firmware, but Iâ€™m learning.",
      "The Shed approves this question. Answers pending.",
      "Pirate logic processingâ€¦ â³",
      "Iâ€™ll log that in the Captainâ€™s Log ğŸ““"
    ];

    return fallback[Math.floor(Math.random() * fallback.length)];
  }

  // ENTER KEY SUPPORT
  document.getElementById("userInput").addEventListener("keydown", function(e) {
    if (e.key === "Enter") sendMessage();
  });
</script>