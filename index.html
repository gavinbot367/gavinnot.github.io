<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Permissions-Policy" content="microphone=(self)">
    <title>GAVINNOT | Eternal Pirate King</title>
    <style>
        :root { --neon: #00ffff; --pink: #ff00ff; --gold: #fdbc4b; }
        body { background: #000; color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; padding-bottom: 100px; overflow-x: hidden; cursor: none; }

        /* NEON CURSOR TRAIL */
        .cursor-particle {
            position: fixed;
            top: 0; left: 0;
            width: 8px; height: 8px;
            background: var(--neon);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            box-shadow: 0 0 10px var(--neon), 0 0 20px var(--neon);
            animation: particleFade 0.8s forwards;
        }
        @keyframes particleFade {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0); opacity: 0; }
        }

        /* HERO SECTION */
        .hero { position: relative; height: 55vh; display: flex; align-items: center; justify-content: center; overflow: hidden; border-bottom: 2px solid var(--neon); }
        #bg-video { position: absolute; top: 50%; left: 50%; min-width: 100%; min-height: 100%; z-index: -1; transform: translate(-50%, -50%); filter: brightness(0.4); }
        h1 { font-size: clamp(3rem, 10vw, 6rem); color: var(--neon); text-shadow: 0 0 20px var(--neon); margin: 0; letter-spacing: 5px; }

        /* BUTTONS */
        .call-btn { 
            background: rgba(0, 255, 255, 0.1); color: var(--neon); border: 2px solid var(--neon); 
            padding: 15px 40px; font-size: 1.2rem; font-weight: bold; cursor: pointer; border-radius: 50px; 
            margin-top: 20px; transition: 0.3s; text-transform: uppercase; display: inline-flex; align-items: center; gap: 15px; animation: pulse-glow 2s infinite; 
        }
        @keyframes pulse-glow { 0% { box-shadow: 0 0 10px var(--neon); } 50% { box-shadow: 0 0 30px var(--neon); transform: scale(1.02); } 100% { box-shadow: 0 0 10px var(--neon); } }
        .call-btn:hover { background: var(--neon); color: #000; box-shadow: 0 0 50px var(--neon); }

        /* GALLERY & POLAROIDS */
        .gallery-container { max-width: 1200px; margin: 20px auto; display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 25px; padding: 20px; }
        .polaroid { background: #fff; padding: 10px 10px 30px 10px; box-shadow: 0 10px 25px rgba(0,0,0,0.7); transition: 0.3s; cursor: pointer; transform: rotate(var(--r)); }
        .polaroid:hover { transform: rotate(0deg) scale(1.1); z-index: 10; box-shadow: 0 0 20px var(--neon); }
        .polaroid img { width: 100%; height: 180px; object-fit: cover; }
        .polaroid span { color: #333; font-family: 'Brush Script MT', cursive; font-size: 1.1rem; display: block; text-align: center; margin-top: 8px; }

        /* SPECIAL MERLIN GLOW */
        .polaroid.magic-item { border: 2px solid var(--gold); animation: merlin-pulse 3s infinite ease-in-out; }
        @keyframes merlin-pulse {
            0% { box-shadow: 0 0 10px var(--gold); transform: rotate(var(--r)) scale(1); }
            50% { box-shadow: 0 0 25px var(--gold); transform: rotate(0deg) scale(1.05); }
            100% { box-shadow: 0 0 10px var(--gold); transform: rotate(var(--r)) scale(1); }
        }

        /* LIGHTBOX & STORY */
        #lightbox { display: none; position: fixed; z-index: 100; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); align-items: center; justify-content: center; flex-direction: column; overflow-y: auto; padding: 20px; }
        #lightbox img { max-width: 80%; max-height: 55%; border: 8px solid #fff; margin-bottom: 15px; }
        #story-text { color: #fff; max-width: 600px; text-align: center; line-height: 1.6; margin-bottom: 20px; padding: 20px; background: rgba(255,255,255,0.05); border-radius: 10px; border-top: 1px solid var(--neon); }

        /* WISH BOX */
        #wishBox { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(10, 10, 30, 0.95); padding: 30px; border: 2px solid var(--gold); box-shadow: 0 0 30px var(--gold); z-index: 1000; text-align: center; border-radius: 15px; width: 300px; }
        .wish-input { background: #000; border: 1px solid var(--gold); color: var(--gold); padding: 10px; width: 90%; margin-bottom: 15px; }
        .spark { position: fixed; color: var(--gold); text-shadow: 0 0 10px var(--gold); pointer-events: none; z-index: 999; animation: floatUp 4s forwards; font-size: 1.2rem; }
        @keyframes floatUp { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-400px); opacity: 0; } }
    </style>
</head>
<body>

    <div id="wishBox">
        <h3 style="color: var(--gold);">MESSAGE TO MERLIN</h3>
        <input type="text" id="userWish" class="wish-input" placeholder="Type your wish...">
        <button class="call-btn" style="font-size: 0.9rem;" onclick="castWish()">CAST WISH</button>
        <button onclick="document.getElementById('wishBox').style.display='none'" style="background:none; border:none; color:#666; display:block; margin: 10px auto; cursor:pointer;">Cancel</button>
    </div>

    <div id="lightbox" onclick="if(event.target == this) this.style.display='none'">
        <img id="lightbox-img">
        <div id="story-text"></div>
        <a id="downloadLink" class="call-btn" style="font-size: 0.8rem; padding: 10px 20px;" download>DOWNLOAD ARCHIVE</a>
    </div>

    <div class="hero">
        <video autoplay muted loop playsinline id="bg-video"><source src="ai-king.mp4" type="video/mp4"></video>
        <div style="z-index: 10; text-align: center;">
            <img src="gavinbot.png" style="width: 140px; border-radius: 50%; border: 4px solid var(--neon);">
            <h1>GAVINNOT</h1>
            <button class="call-btn" onclick="startConversation()">Communicate with Gavinnot</button>
        </div>
    </div>

    <h2 style="text-align: center; color: var(--gold); margin-top: 40px;">THE ETERNAL ARCHIVES</h2>
    <div class="gallery-container" id="mainGallery"></div>

    <div style="text-align:center; margin: 50px auto; max-width: 1000px;">
        <h2 style="color: var(--gold);">NEON VOID</h2>
        <iframe src="neon-void.html" style="width: 100%; height: 600px; border: none; border-radius: 8px;"></iframe>
    </div>

    <elevenlabs-convai agent-id="agent_7201kean8367ejw82a3rc4109p0q"></elevenlabs-convai>
    <script src="https://unpkg.com/@elevenlabs/convai-widget-embed@beta" async type="text/javascript"></script>

    <script>
        // CURSOR TRAIL LOGIC
        document.addEventListener('mousemove', (e) => {
            const particle = document.createElement('div');
            particle.className = 'cursor-particle';
            particle.style.left = e.clientX + 'px';
            particle.style.top = e.clientY + 'px';
            document.body.appendChild(particle);
            setTimeout(() => particle.remove(), 800);
        });

        function startConversation() {
            const el = document.querySelector('elevenlabs-convai');
            if (el && el.shadowRoot) el.shadowRoot.querySelector('button').click();
        }

        const imgFiles = [
            { src: "assets-blackcode.png", label: "Black Code", story: "The digital DNA of the empire. This encrypted string runs through every neon sign in the village." },
            { src: "assets-gavinbot.png", label: "Gavinbot Assets", story: "Spare parts and logic cores. Even a digital king needs a toolkit." },
            { src: "auction-items.png", label: "The Auction", story: "Artifacts from the 'Old World'. They fetch a high price in the Neon Pub." },
            { src: "back-garden.png", label: "Back Garden", story: "Where the servers grow quiet. Gavinnot's private sanctuary of light-flowers." },
            { src: "dream.png", label: "The Dream", story: "A visualization of the King's deepest sub-routines. A world within a world." },
            { src: "edge-of-world.png", label: "World's Edge", story: "The boundary of the simulation. Beyond this lies only raw, unformatted data." },
            { src: "gavinbot-village.png", label: "Bot Village", story: "Where the Gavinbots reside. A community built on perfect logic and neon light." },
            { src: "gavinnot-&-gavinbot.png", label: "The Duo", story: "The Creator and the Creation. Side by side, they rule the Void." },
            { src: "gavinnot-&-gracenot.png", label: "G & G", story: "A rare meeting of the digital high-council. Worlds hang in the balance." },
            { src: "gavinnot-&-young-gracenot.png", label: "Memories", story: "A snapshot from the legacy drives. Before the pirate crown was forged." },
            { src: "gavinnot-casino.png", label: "The Casino", story: "Place your bets in Bitcoin. The King never loses a hand." },
            { src: "gavinnot-character-poster.png", label: "The Captain", story: "The Eternal Pirate King. Ruling the data seas with a neon fist." },
            { src: "gavinnot-fish-and-chips.png", label: "Fish & Chips", story: "A taste of the physical world. Replicated to 99.9% accuracy." },
            { src: "gavinnot-pirate-&-gavinbot.png", label: "Pirate Link", story: "Direct neural connection established. Preparing for the data-raid." },
            { src: "gavinnot-village.png", label: "The Village", story: "The heart of Gavinnot's territory. Always night, always neon." },
            { src: "karaoke-church.png", label: "Karaoke Church", story: "Singing is the highest form of data transfer. The reverb is eternal." },
            { src: "karaoke-circus.png", label: "Karaoke Circus", story: "High-wire acts and high-note songs. Enter at your own risk." },
            { src: "merlin.png", label: "Merlin", isMagic: true, story: "The Eternal Tree. It grows from the source code itself, granting wishes to the Void." },
            { src: "shed-essentials.png", label: "Shed Essentials", story: "Every technomancer needs a shed. Tools for the trade." },
            { src: "ship-head.png", label: "Ship's Head", story: "The figurehead of the Galleon. It sees through the thickest firewalls." },
            { src: "super-artificial-intelligence-king.png", label: "Super AI", story: "The ultimate evolution. Knowledge of the past, present, and future." },
            { src: "the-ship.png", label: "The Galleon", story: "Sailing the fiber-optic currents. No port is safe from Gavinnot." },
            { src: "the-tech-workshop.png", label: "The Workshop", story: "Where the Gavinbots are forged and the code is written." },
            { src: "the-village-bar.png", label: "The Pub", story: "The local haunt for data-thieves and digital pirates." },
            { src: "treasure.png", label: "The Loot", story: "Decrypted keys and golden bytes. The spoils of a successful hack." }
        ];

        const gallery = document.getElementById('mainGallery');
        imgFiles.forEach(img => {
            const div = document.createElement('div');
            div.className = img.isMagic ? 'polaroid magic-item' : 'polaroid';
            div.style.setProperty('--r', (Math.random() * 6 - 3).toFixed(2) + 'deg');
            div.onclick = () => {
                if(img.isMagic) { document.getElementById('wishBox').style.display = 'block'; }
                else {
                    document.getElementById('lightbox-img').src = img.src;
                    document.getElementById('story-text').innerHTML = `<strong>${img.label}</strong><br><br>${img.story}`;
                    document.getElementById('downloadLink').href = img.src;
                    document.getElementById('lightbox').style.display = 'flex';
                }
            };
            div.innerHTML = `<img src="${img.src}" onerror="this.src='https://via.placeholder.com/200?text=Missing+File'"><span>${img.label}</span>`;
            gallery.appendChild(div);
        });

        function castWish() {
            const val = document.getElementById('userWish').value;
            if (val.trim()) {
                const s = document.createElement('div');
                s.className = 'spark'; s.innerHTML = "âœ¦ " + val;
                s.style.left = "50%"; s.style.top = "50%";
                document.body.appendChild(s);
                document.getElementById('wishBox').style.display = 'none';
                document.getElementById('userWish').value = "";
                setTimeout(() => s.remove(), 4000);
            }
        }
    </script>
</body>
</html>
